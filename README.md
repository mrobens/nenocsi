McAERsim - NoC Simulator with Tree-Based Multicast Support for AER Packets
==========================================================================

McAERsim is the basis of a co-simulation framework to examine network traffic generated by the neuroscientific simulator [NEST](https://nest-simulator.org) using source-address driven tree-based multicast routing of AER packets. It is loosely based on [Noxim](https://github.com/davidepatti/noxim), a network-on-chip simulator developed at the University of Catania (Italy) using the SystemC library and released under "GPL license terms". Modifications within McAERsim and McAERsim as a whole are provided by Forschungszentrum Juelich GmbH ([ZEA-2](https://www.fz-juelich.de/en/zea/zea-2), Germany) under the following conditions: 
>This program is free software: you can redistribute it and/or modify it under the terms of the [GNU General Public License](https://www.gnu.org/licenses/gpl-3.0.html.en) as published by the Free Software Foundation, either version 3 of the license or (at your option) any later version. This program is distributed in the hope that it will be useful, but without any warranty; without even the implied warranty of merchantability or fitness for a particular purpose. See the [GNU General Public License](https://www.gnu.org/licenses/gpl-3.0.html.en) for more details.

What's New?
-----------
**[January 2024]**

  * First release of McAERsim and auxiliary files to set up a framework for NEST-McAERsim co-simulation
  * Traffic injection from output generated by NEST
  * Source-address driven tree-based multicast support for AER packets
  * Support for mesh and torus shaped networks
  
Installation
------------

For installation instructions regarding the whole framework, please consult [INSTALL.txt](doc/INSTALL.txt). This file explains step by step how to install NEST as well as McAERsim and RTparser. It shows how to copy and modify the PyNEST cortical microcircuit example, or more precisely, how to extend existing Python scripts with some entries. Execution of the model then generates a YAML file with connectivity information. This file is processed by **rtparser** to convert the connectivity information to a routing table that is subsequently used by McAERsim. Network simulations that step through different values of the acceleration factor with respect to biological real time can then be initiated by the Bash-scripts located in the [scripts](scripts) subfolder. Images that are created this way are finally placed in the subfolders moved to the **bin/results** subfolder.

**For Ubuntu-20.04.2 LTS there is also a shortcut for the installation:** just perform the following two steps. First, install the required system libraries used by McAERsim as well as NEST:

    sudo apt install -y build-essential libyaml-cpp-dev libboost-dev libboost-filesystem-dev \
	libsystemc libsystemc-dev xutils-dev libtool cmake libreadline-dev gsl-bin libgsl-dev \
	cython3 python3-all-dev python3-numpy python3-scipy python3-matplotlib python3-nose \
	ipython3 python3-future python3-mpi4py libmusic-dev music-bin python3-pip python3-pytest \
	python3-pytest-timeout python3-pytest-xdist gnuplot
	
Then issue the following command. It will install McAERsim as well as NEST in your home folder. The script executed by this command can also be used later on to export the required environment variables used by NEST. It will be available at `${HOME}/mcaersim-1.0/scripts/install/ubuntu-20.04.2-install.sh`. If you consider to install both frameworks, i.e. the present framework and the framework involving NENoCSi, the script does account for the requirement that NEST needs to be installed only once. Make sure to copy the full line including *ubuntu-20.04.2-install.sh* and the closing parenthesis.

    source <(wget -qO- https://raw.githubusercontent.com/mrobens/nenocsi-mcaersim/mcaersim/scripts/install/ubuntu-20.04.2-install.sh)
	
After execution of this command, you should find yourself in the correct directory to immediately launch the simulation scripts.

Quick Start
-----------

McAERsim has a command line interface that accepts a couple of parameters: network topology, network size, and the neuron assignment strategy are just few examples. For the full list of parameters, change to the **bin** subfolder and type

    ./mcaersim -help
	
McAERsim allows for the evaluation of network performance in terms of throughput, delay, and energy consumption through average as well as per-communication results. More precisely, it will create command line output on the number of received events, the number of locally delivered events, global average delay, maximum delay, network throughput, average throughput per tile, consumed energy (total/static/dynamic) and a possible CAM look-up failure. (However, lacking energy results from HDL simulations or measurements, energy contributions currently are initialized to Zero).
